---
title: "README-TaxAss-BatchFiles"
author: "Robin Rohwer"
date: "September 12, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "/Users/athena/Desktop/TaxAssData/TaxAss-BatchFiles")
```

## Reproduce Data Processing in TaxAss Paper  
#### Download versions of programs and databases used in this paper:
Program       | Version             | Download From
--------------|---------------------|-------------------------  
mothur        | v.1.39.5            | mothur.org  
SraToolkit    | 2.7.0-mac64         | ncbi.nlm.nih.gov  
BLAST         | 2.2.31+             | ncbi.nlm.nih.gov  
vsearch       | 2.4.3-macos-x86_64  | github.com/torognes/vsearch
TaxAss        | SHA **??????????**  | github.com/McMahonLab/TaxAss/tax-scripts <br> (And included in these batch files)

Database      | Version | File Name          | Download From
--------------|---------|--------------------|-------------------------  
FreshTrain    | 18Aug2016 | FreshTrain18Aug2016.zip | github.com/McMahonLab/TaxAss/FreshTrain-files
Greengenes    | May 2013  | gg_13_5.fasta <br> gg_13_5_taxonomy.txt| greengenes.secondgenome.com/downloads
Silva Seed    | v128      | silva.seed_v128.align     | mothur.org    

#### Add these programs to your path after installing:  

* mothur  
* SraToolkit  
* BLAST (probably automatically installs to path)  
 
The TaxAss tax-scripts are already in each ecosystem folder here. Otherwise you would add them to your working directory (not on the path).

#### Download the reference databases into the existing folder called ReferenceDatabases:  

* FreshTrain  
* Greengenes  
* Silva seed

Unzip the files, and move them so that they are not nested within other folders after expanding. Do not change any names. This is what the contents of `ReferenceDatabases` should look like:

```{bash, eval=T}
ls ReferenceDatabases/
```

#### Notes on these batch files:  
- QC downloads raw fastq files and converts them to fasta files using standard QC settings.  
- TaxAss runs the full TaxAss workflow, including optional steps to identify a good percent identity cutoff.  
- Quickie TaxAss runs only one pident, skipping optional checks.  
  
- These batch files are "all inclusive" because they're just meant to provide reproducible results. If you're running TaxAss on your own data and want to run as a batch file, you should adjust the provided batch files within the tax-scripts folder with names `RunSteps_*.sh`.


## Process Lake Mendota!

- Note that script annotations include more details.  
- Sending the terminal output to a text file allows you to check for errors later. Deleting the 1000's of lines of numbers mothur prints while processing makes the output readable.  


```{bash, eval=F}
cd Mendota/QC-Mendota/
./qc_mendota.sh > terminaloutput.txt
./deletemothurbarf.sh terminaloutput.txt > terminaloutput.txt

cd ../TaxAss-Mendota/
./taxass_mendota.sh > terminaloutput.txt
./deletemothurbarf.sh terminaloutput.txt > terminaloutput.txt

cd ../Quickie-TaxAss-Mendota/
./taxass_mendota_99.sh > terminaloutput.txt
./deletemothurbarf.sh terminaloutput.txt > terminaloutput.txt
```

## Process Trout Bog Epilimnion!


## Process Trout Bog Hypolimnion!


## Process Lake Michigan!


## Process Danube River!  


## Process Mouse Gut!




